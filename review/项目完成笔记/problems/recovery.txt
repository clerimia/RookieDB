成功解决的问题
LockContext.getEffectiveLockType() 方法 - 修复了获取有效锁类型时没有考虑父节点隐式锁的问题
ARIESRecoveryManager.end() 方法 - 删除了错误的 newTransaction.apply(transNum).close() 调用
锁升级冲突 - 通过修复 getEffectiveLockType 解决了 X 锁无法升级到 IX 锁的问题
测试验证
testRollbackDropAllTables 测试现在能够：
✅ 在数据库上获取 X 锁
✅ 删除所有表（Students, Enrollments, Courses）
✅ 验证删除后表不存在
✅ 正确回滚删除操作
✅ 恢复所有表和数据
这表明：
恢复管理器正常工作（ARIES 算法的 rollback 流程正确）
锁管理器正常工作（多粒度锁协议正确处理隐式锁）
事务生命周期正常（RUNNING → ABORTING → COMPLETE）